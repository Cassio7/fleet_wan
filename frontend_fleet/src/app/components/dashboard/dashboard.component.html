<mat-drawer-container class="drawer-container" autosize>
  <app-navbar></app-navbar>
  <mat-drawer #drawer class="sidebar" mode="side">
    <div class="drawer-content">
      <img class="sidebar-logo" src="assets/logo.png" alt="">
      <hr>
      <div class="main-actions">
        <button mat-raised-button class="dashboard-btn button" routerLink="dashboard"><mat-icon>dashboard</mat-icon>Dashboard</button>
        <button mat-raised-button class="mezzi-btn button"><mat-icon>local_shipping</mat-icon>Mezzi</button>
        <button mat-raised-button class="dettaglio-mezzi-btn button"><mat-icon>search</mat-icon><mat-icon>local_shipping</mat-icon>Dettaglio mezzi</button>
      </div>
      <div class="settings">
        <button mat-raised-button class="gestione-btn button"><mat-icon>manage_accounts</mat-icon>Gestione utente</button>
        <button mat-raised-button class="settings-btn button"><mat-icon>settings</mat-icon>Impostazioni</button>
      </div>
    </div>
  </mat-drawer>

<div class="content">


  <div class="first-column">
    <div class="filter-container">
      <h4>Cantieri:</h4>
      <mat-form-field class="filter-form">
        <mat-select [formControl]="cantieri" placeholder="Seleziona cantieri" multiple>
          <mat-option [value]="cantiere" (click)="selectCantiere(cantiere)" *ngFor="let cantiere of listaCantieri">
            {{cantiere}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div><!--Filter container end-->
    <div class="table-container">
      <table *ngIf="vehicleTableData" #vehicleTable mat-table [dataSource]="vehicleTableData" class="mat-elevation-z8 table-el">
        <!-- Comune Column -->
        <ng-container matColumnDef="comune">
          <div class="comune-col">
            <th mat-header-cell *matHeaderCellDef> Veicoli</th>
            <td mat-cell *matCellDef="let session"> {{ session.history[0].vehicle.veId }} </td>
          </div>
        </ng-container>


        <!-- Targa Column -->
        <ng-container matColumnDef="targa">
          <th mat-header-cell *matHeaderCellDef> Targa </th>
          <td mat-cell *matCellDef="let session">{{session.history[0].vehicle.plate}}</td>
        </ng-container>

        <!-- GPS Column -->
        <ng-container matColumnDef="GPS">
          <th mat-header-cell *matHeaderCellDef> GPS </th>
          <td mat-cell *matCellDef="let session"><mat-icon class="warning-icon" *ngIf="session.history[0].vehicle.gpsError">warning</mat-icon><mat-icon class="check-icon" *ngIf="!session.history[0].vehicle.gpsError">check_circle</mat-icon></td>
        </ng-container>

        <!-- Antenna Column -->
        <ng-container matColumnDef="antenna">
          <th mat-header-cell *matHeaderCellDef> Antenna</th>
          <td mat-cell *matCellDef="let session"><mat-icon class="error-icon" *ngIf="antennaError">error</mat-icon><mat-icon class="check-icon" *ngIf="!antennaError">check_circle</mat-icon></td>
        </ng-container>

        <!-- Sessione Column -->
        <ng-container matColumnDef="sessione">
          <th mat-header-cell *matHeaderCellDef> Sessione </th>
          <td mat-cell *matCellDef="let session"><mat-icon class="error-icon" *ngIf="sessionError">error</mat-icon><mat-icon class="check-icon" *ngIf="!sessionError">check_circle</mat-icon></td>
        </ng-container>

        <!-- Header and Row Definitions -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div><!--Table end-->
  </div><!--First column end-->
  <div class="second-column">
    <div class="map"></div>
    <div class="graphs">
      <div class="error-graph"><app-error-graph></app-error-graph></div>
      <div class="blackbox-graph"><app-blackbox-graph></app-blackbox-graph></div>
    </div><!--Graphs end-->
  </div><!--Second column end-->

</div><!-- content end -->

</mat-drawer-container>
