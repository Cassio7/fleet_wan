table roles{
  id int [primary key]
  name string
  description text
}

table users{
  id int [primary key]
  name string
  email string
  password string
}

table user_roles{
  id int [primary key]
  userId int [ref: > users.id]
  roleId int [ref: > roles.id]
}

table companies{
  id int [primary key]
  suId int
  name string
}

table role_companies{
  id int [primary key]
  companyId int [ref: > companies.id]
  roleId int [ref: > roles.id]
}

table role_groups{
  id int [primary key]
  groupId int [ref: > groups.id]
  roleId int [ref: > roles.id]
}

table groups{
  id int [primary key]
  vgId int
  name string
  companyId it [ref: > companies.id]
}

Table vehicles {
  id int [primary key]
  veId int 
  active boolean
  plate string
  model string
  firstEvent datetime 
  lastEvent datetime 
  lastSessionEvent datetime 
  isCan boolean
  isRFIDReader boolean
  profileId int
  profileName string
  hash string
  deviceId int [ref: - devices.id]
}

table devices{
  id int [primary key]
  device_id int
  type int
  serial_number string
  date_build date
  fw_upgrade_disable boolean
  fw_id int
  fw_update datetime
  fw_upgrade_received int
  rtc_battery_fail boolean
  power_fail_detected int
  power_on_off_detected int
  hash string
}


table vehicle_group {
  id int [primary key]
  groupId int [ref: > groups.id]
  vehicleId int [ref: > vehicles.id]
}

table realtime_positions{
  id int [primary key]
  row_number int
  timestamp timestamp
  status int
  latitude double
  longitude double
  nav_mode int
  speed int
  direction int
  hash string
  vehicleId int [ref: > vehicles.id]
}

table history{
  id int [primary key]
  timestamp timestamp
  status int
  latitude double
  longitude double
  nav_mode int
  speed int
  direction int
  tot_distance double
  tot_consumption double
  fuel float
  brushes int
  hash string
  vehicleId int [ref: > vehicles.id]
  sessionId int [ref: > session.id]
}

table tags{
  id int [primary key]
  epc string
}

table tag_history{
  id int [primary key]
  timestamp timestamp
  latitude double
  longitude double
  nav_mode int
  geozone string
  hash string
  vehicleId int [ref: > vehicles.id]
}

table detection_tag{
  id int [primary key]
  tid string
  detection_quality float
  tagId string [ref: > tags.id]
  tagHistoryId int [ref: > tag_history.id]
}

table session{
  id int [primary key]
  period_from date
  period_to date
  sequence_id int
  closed boolean
  distance int
  engine_drive int
  engine_stop int
  hash string
}